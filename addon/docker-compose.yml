services:
  stremio-nas-addon:
    build: .
    container_name: stremio-nas-addon
    restart: unless-stopped
    ports:
      - "1222:1222" # Map host port 1222 to container port 1222
    environment:
      # URL for addon to connect to API server
      # Also used as base URL for stream URLs that Stremio will use
      # Can use Docker service name (internal) or external URL (must be accessible from Stremio)
      # Override in .env file or set here
      - API_URL=${API_URL:-http://stremio-nas-api:3000}
      
      # API Key for authentication (optional - required if server has API_KEY configured)
      # Must match the API_KEY set in the server environment
      # Override in .env file or set here
      - API_KEY=${API_KEY:-}
      
      # Addon configuration
      # Override in .env file or set here
      - PORT=${PORT:-1222}
      
      # Polling configuration
      # Override in .env file or set here
      - POLL_INTERVAL_MINUTES=${POLL_INTERVAL_MINUTES:-5}
      - ENABLE_POLLING=${ENABLE_POLLING:-true}
      
      # Logging
      # Override in .env file or set here
      - LOG_LEVEL=${LOG_LEVEL:-debug}
      
      # Indexing configuration
      # Override in .env file or set here
      - MAX_INDEXED=${MAX_INDEXED:-10000}
    networks:
      - media-network
    depends_on:
      - stremio-nas-api # Optional: only needed if API is in the same compose file



networks:
  media-network:
    driver: bridge


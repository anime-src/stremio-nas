# ============================================
# Stremio NAS Environment Configuration
# ============================================
# Copy this file to .env and update the values for your setup
# cp env.example .env (Linux/Mac)
# copy env.example .env (Windows)

# ============================================
# REQUIRED: Update these with your actual values
# ============================================

# Your machine's LAN IP address (accessible from other devices on your network)
# Find it with: ipconfig (Windows) or ip addr (Linux)
# Example: 192.168.1.100
HOST_IP=192.168.1.27

# ============================================
# Port Configuration
# ============================================

# API server port (for streaming and file management)
API_PORT=3001

# Stremio addon port (for addon manifest)
ADDON_PORT=1222

# Admin UI port (for web dashboard)
ADMIN_PORT=8081

# ============================================
# Database Configuration (PostgreSQL)
# ============================================

# Database type: postgresql, mysql, or mariadb
DB_TYPE=postgresql

# PostgreSQL connection settings
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_NAME=stremio_nas

# Note: For SQLite, set DB_TYPE=sqlite and DB_PATH=/app/storage/media.db
# However, SQLite is not supported with Bun runtime - use PostgreSQL instead

# ============================================
# Encryption Configuration
# ============================================

# Encryption key for password encryption (32 bytes = 64 hex characters)
# Generate a new key with: node -p "require('crypto').randomBytes(32).toString('hex')"
# Or: openssl rand -hex 32
# IMPORTANT: Keep this key secure and consistent. If you change it, encrypted passwords won't be decryptable.
ENCRYPTION_KEY=CHANGE_ME_TO_A_64_CHARACTER_HEX_STRING

# ============================================
# Scanner Configuration
# ============================================

# Cron expression for scan interval (default: every 5 minutes)
SCAN_INTERVAL=*/5 * * * *

# Run scan on server startup (true/false)
SCAN_ON_STARTUP=true

# Minimum video file size in MB (smaller files are ignored)
MIN_VIDEO_SIZE_MB=50

# Allowed video file extensions (comma-separated)
ALLOWED_EXTENSIONS=.mp4,.mkv,.avi

# ============================================
# Cache Configuration
# ============================================

# IMDB cache TTL in milliseconds (default: 24 hours = 86400000)
CACHE_IMDB_TTL=86400000

# Maximum cache entries
CACHE_MAX_SIZE=1000

# ============================================
# API Security Configuration
# ============================================

# API key for authentication (optional)
# If set, all API endpoints (except /health and /api-docs) will require the X-API-Key header
# Generate a secure key with: node -p "require('crypto').randomBytes(32).toString('hex')"
# Or: openssl rand -hex 32
# Leave empty to disable API key authentication
API_KEY=

# ============================================
# Logging Configuration
# ============================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# ============================================
# Media Directory (inside container)
# ============================================

# Default media directory path inside the container
# This is mapped from your host via volumes in docker-compose.yml
MEDIA_DIR=/data/videos

# ============================================
# Addon Polling Configuration
# ============================================

# Poll API every X minutes for file updates
POLL_INTERVAL_MINUTES=5

# Enable/disable periodic polling (true/false)
ENABLE_POLLING=true
<div class="bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden transition-colors duration-200">
  <!-- Mobile Card View -->
  <div class="md:hidden p-4 space-y-4">
    <div *ngFor="let file of files" class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
      <div class="flex gap-4">
        <!-- Thumbnail -->
        <div *ngIf="showThumbnail" class="flex-shrink-0">
          <div class="w-20 h-28 bg-gray-200 dark:bg-gray-700 rounded overflow-hidden flex items-center justify-center relative">
            <img
              *ngIf="getImageSrc(file)"
              [src]="getImageSrc(file)"
              [alt]="file.imdbName || file.name"
              class="w-full h-full object-cover"
              (error)="onImageError($event)"
            />
            <div
              [class.hidden]="getImageSrc(file)"
              class="w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500 absolute inset-0"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
                ></path>
              </svg>
            </div>
          </div>
        </div>

        <!-- Content -->
        <div class="flex-1 min-w-0">
          <!-- Title -->
          <div class="flex items-start gap-2 mb-2">
            <svg
              *ngIf="file.imdbName"
              class="w-4 h-4 text-yellow-500 dark:text-yellow-400 flex-shrink-0 mt-0.5"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
              ></path>
            </svg>
            <div class="flex-1 min-w-0">
              <h3
                *ngIf="file.imdbName"
                (click)="handleFileClick(file)"
                [class.cursor-pointer]="onFileClick"
                [class.hover:text-indigo-600]="onFileClick"
                [class.dark:hover:text-indigo-400]="onFileClick"
                [class.hover:underline]="onFileClick"
                class="text-sm font-semibold text-gray-900 dark:text-gray-100 truncate"
                [title]="file.imdbName + (file.imdbYear ? ' (' + file.imdbYear + ')' : '')"
              >
                {{ file.imdbName }}{{ file.imdbYear ? ' (' + file.imdbYear + ')' : '' }}
              </h3>
              <p class="text-xs text-gray-500 dark:text-gray-400 truncate mt-0.5" [title]="file.name">
                {{ file.name }}
              </p>
            </div>
          </div>

          <!-- Badges and Info -->
          <div class="flex flex-wrap items-center gap-2 mb-2">
            <span
              class="px-2 py-0.5 text-xs font-semibold rounded-full"
              [class.bg-blue-100]="file.type === 'movie'"
              [class.dark:bg-blue-900/30]="file.type === 'movie'"
              [class.text-blue-800]="file.type === 'movie'"
              [class.dark:text-blue-300]="file.type === 'movie'"
              [class.bg-purple-100]="file.type === 'series'"
              [class.dark:bg-purple-900/30]="file.type === 'series'"
              [class.text-purple-800]="file.type === 'series'"
              [class.dark:text-purple-300]="file.type === 'series'"
            >
              {{ file.type || 'Unknown' }}
            </span>
            <span *ngIf="file.resolution" class="text-xs text-gray-600 dark:text-gray-400">
              {{ file.resolution }}
            </span>
            <span class="text-xs text-gray-600 dark:text-gray-400">
              {{ formatBytes(file.size) }}
            </span>
          </div>

          <!-- Additional Info -->
          <div class="space-y-1 text-xs text-gray-600 dark:text-gray-400">
            <div *ngIf="file.imdb_id" class="flex items-center gap-1">
              <span class="font-medium">IMDB:</span>
              <span>{{ file.imdb_id }}</span>
            </div>
            <div *ngIf="showWatchFolder" class="flex items-center gap-1">
              <svg
                class="w-3.5 h-3.5 text-gray-400 dark:text-gray-500 flex-shrink-0"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"
                ></path>
              </svg>
              <span class="truncate">{{ getWatchFolderName(file.watch_folder_id) }}</span>
            </div>
            <div *ngIf="showAddedDate && file.createdAt" class="flex items-center gap-1">
              <span class="font-medium">Added:</span>
              <span>{{ formatDate(file.createdAt) }}</span>
            </div>
          </div>

          <!-- Action Button -->
          <div *ngIf="showActions" class="mt-3">
            <button
              (click)="handleFileClick(file)"
              class="w-full px-3 py-1.5 text-xs font-medium text-indigo-600 dark:text-indigo-400 border border-indigo-600 dark:border-indigo-400 rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors cursor-pointer"
            >
              View Details
            </button>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="files.length === 0" class="text-center py-8 text-sm text-gray-500 dark:text-gray-400">
      No files found
    </div>
  </div>

  <!-- Desktop Table View -->
  <div class="hidden md:block overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
      <thead class="bg-gray-50 dark:bg-gray-700">
        <tr>
          <th
            *ngIf="showThumbnail"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-24"
          >
            Thumbnail
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider min-w-[300px]"
          >
            Name
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
          >
            Type
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
          >
            IMDB ID
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
          >
            Size
          </th>
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
          >
            Resolution
          </th>
          <th
            *ngIf="showWatchFolder"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
          >
            Watch Folder
          </th>
          <th
            *ngIf="showAddedDate"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
          >
            Added
          </th>
          <th
            *ngIf="showActions"
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
          >
            Actions
          </th>
        </tr>
      </thead>
      <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
        <tr *ngFor="let file of files" class="hover:bg-gray-50 dark:hover:bg-gray-700/50">
          <td *ngIf="showThumbnail" class="px-6 py-4">
            <div class="w-16 h-24 bg-gray-200 dark:bg-gray-700 rounded overflow-hidden flex items-center justify-center relative">
              <img
                *ngIf="getImageSrc(file)"
                [src]="getImageSrc(file)"
                [alt]="file.imdbName || file.name"
                class="w-full h-full object-cover"
                (error)="onImageError($event)"
              />
              <div
                [class.hidden]="getImageSrc(file)"
                class="w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500 absolute inset-0"
              >
                <svg
                  class="w-8 h-8"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
                  ></path>
                </svg>
              </div>
            </div>
          </td>
          <td class="px-6 py-4 min-w-[300px]">
            <div class="text-sm font-medium text-gray-900 dark:text-gray-100 flex items-center gap-1.5">
              <svg
                *ngIf="file.imdbName"
                class="w-4 h-4 text-yellow-500 dark:text-yellow-400 flex-shrink-0"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                ></path>
              </svg>
              <span
                *ngIf="file.imdbName"
                (click)="handleFileClick(file)"
                [class.cursor-pointer]="onFileClick"
                [class.hover:text-indigo-600]="onFileClick"
                [class.dark:hover:text-indigo-400]="onFileClick"
                [class.hover:underline]="onFileClick"
                [title]="onFileClick ? 'Click to view details' : ''"
              >
                {{ file.imdbName }}{{ file.imdbYear ? ' (' + file.imdbYear + ')' : '' }}
              </span>
              <span *ngIf="!file.imdbName">{{ file.name }}</span>
            </div>
            <div class="text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1.5 mt-1">
              <svg
                class="w-4 h-4 text-gray-400 dark:text-gray-500 flex-shrink-0"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                ></path>
              </svg>
              <span>{{ file.name }}</span>
            </div>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span
              class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
              [class.bg-blue-100]="file.type === 'movie'"
              [class.dark:bg-blue-900/30]="file.type === 'movie'"
              [class.text-blue-800]="file.type === 'movie'"
              [class.dark:text-blue-300]="file.type === 'movie'"
              [class.bg-purple-100]="file.type === 'series'"
              [class.dark:bg-purple-900/30]="file.type === 'series'"
              [class.text-purple-800]="file.type === 'series'"
              [class.dark:text-purple-300]="file.type === 'series'"
            >
              {{ file.type || 'Unknown' }}
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ file.imdb_id || '-' }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ formatBytes(file.size) }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ file.resolution || '-' }}
          </td>
          <td *ngIf="showWatchFolder" class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            <div class="flex items-center gap-1.5">
              <svg
                class="w-4 h-4 text-gray-400 dark:text-gray-500 flex-shrink-0"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"
                ></path>
              </svg>
              <span>{{ getWatchFolderName(file.watch_folder_id) }}</span>
            </div>
          </td>
          <td *ngIf="showAddedDate" class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
            {{ formatDate(file.createdAt) }}
          </td>
          <td *ngIf="showActions" class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button
              (click)="handleFileClick(file)"
              class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300 cursor-pointer"
            >
              Details
            </button>
          </td>
        </tr>
        <tr *ngIf="files.length === 0">
          <td
            [attr.colspan]="getColspan()"
            class="px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400"
          >
            No files found
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
